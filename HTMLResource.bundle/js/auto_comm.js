function getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=decodeURI(window.location.search).substr(1).match(t);return null!==o?unescape(o[2]):null}function checkSDKFunction(e){return!(!window.JSKitOnClient||"function"!=typeof window.JSKitOnClient[e])}function closeWindow(){(_uxt.push(["_trackEvent",_uxtsdkid+"+SDK+免密登录","点击","退出登录"]),checkSDKFunction("methodWithJsonPara"))&&window.JSKitOnClient.methodWithJsonPara('{"result":-7002,"msg":"退出登录，关闭webview"}')}function backWay(e,t,o){"undifined"!=typeof t&&("autoLogin"===t?(e.setAttribute("href","auto_login.html"),_uxt.push(["_trackEvent",o,"点击","返回免密登录页面"])):(e.setAttribute("href","javascript:closeWindow();"),_uxt.push(["_trackEvent",o,"点击","调用客户端关闭登录"])))}function fshowNormalLogin(e){commLogin.showDivIndex=1,normalLogin.className="block",codeGroup.className="hide",secondValidate.className="hide",e&&1===e?_uxt.push(["_trackEvent",_uxtsdkid+"+SDK+安全验证","点击","返回上一页"]):e&&2===e&&_uxt.push(["_trackEvent",_uxtsdkid+"+SDK+设备校验","点击","返回上一页"])}function uibtnBackClick(){document.getElementById("j-client-back").click()}function linkURL(e){window.location.href=encodeURI(e)}function checkEmpty(e){return e.value.replace(/\s+/g,"").length>0}function show(e){e.classList.remove("hide"),e.classList.add("block")}function hidden(e){e.classList.add("hide"),e.classList.remove("block")}function displayblock(e){e.style.display="block"}function changeBtnDisable(e,t){t?(e.className=btnClasses,e.removeAttribute("disabled")):(e.className=btnClassesDis,e.setAttribute("disabled",!0))}function changeSafeDisable(e,t){t?(e.className=safebtnClasses,e.removeAttribute("disabled")):(e.className=safbtneClassesDis,e.setAttribute("disabled",!0))}function getGuid(){var e=checkSDKFunction("getUserGUID"),t={key:"guid",value:""};return e&&(t.value=window.JSKitOnClient.getUserGUID()),t}function hasThreeLogin(e){if(e&&e.length>0){var t=e.split("|");return-1!=t.indexOf("qq")||(-1!=t.indexOf("weibo")||-1!=t.indexOf("weixin"))}return!1}function checkEntryMobileTitle(e){var t="CT"===e.accessOperator||"CU"===e.accessOperator,o=e.encryptMobile.length>0;return t&&o}function ajax(options){function empty(){}function obj2Url(e){if(e&&e instanceof Object){var t=[];for(var o in e)e.hasOwnProperty(o)&&("function"==typeof e[o]&&(e[o]=e[o]()),null===e[o]&&(e[o]=""),t.push(escape(o)+"="+escape(e[o])));return t.join("&").replace(/%20/g,"+")}return e}var opt={url:"",sync:!0,method:"GET",data:null,username:null,password:null,dataType:null,success:empty,error:empty,timeout:0,header:null};for(var i in options)options.hasOwnProperty(i)&&(opt[i]=options[i]);var accepts={script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},abortTimeout=null,xhr=new XMLHttpRequest;if(xhr.onreadystatechange=function(){if(4==xhr.readyState){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var protocol=/^([\w-]+:)\/\//.test(options.url)?RegExp.$1:window.location.protocol,result,dataType,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0===xhr.status&&"file:"==protocol){if("arraybuffer"==xhr.responseType||"blob"==xhr.responseType)result=xhr.response;else{result=xhr.responseText,dataType=opt.dataType?opt.dataType:xhr.getResponseHeader("content-type").split(";",1)[0];for(var i in accepts)accepts.hasOwnProperty(i)&&accepts[i].indexOf(dataType)>-1&&(dataType=i);try{"script"==dataType?eval(result):"xml"==dataType?result=xhr.responseXML:"json"==dataType&&(result=""===result.trim()?null:JSON.parse(result))}catch(e){opt.error(e,xhr),xhr.abort()}}opt.success(result,xhr)}else opt.error(xhr.statusText,xhr)}},"GET"==opt.method){var parse=opt.url.parseURL();opt.data=Object.assign({},opt.data,parse.params),opt.url=parse.pathname+"?"+obj2Url(opt.data),opt.data=null}xhr.open(opt.method,opt.url,opt.sync,opt.username,opt.password),"POST"==opt.method&&xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),opt.header&&xhr.setRequestHeader(opt.header.key,opt.header.value),opt.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),opt.error("timeout",xhr)},opt.timeout)),xhr.send(opt.data?obj2Url(opt.data):null)}var uxt={initUxt:function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=(document.location.protocol,"https://ux.21cn.com/api/htmlReportRest/getJs.js?pid=A22FA6F381D849C3BFEA045E327FEDE1");var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},j_other_line=document.getElementById("j-other-line"),j_other_logo=document.getElementById("j-other-logo"),normalLogin=document.getElementById("j-normal-login"),codeGroup=document.getElementById("j-code-group"),secondValidate=document.getElementById("j-second-validate"),timeouttimmer="8000",waittimmer=500,hasTouch="ontouchstart"in window,START_EV=hasTouch?"touchend":"click",isloginText="该账号已登录，请登录其他账号",_uxtsdkid="test",otherloginText="其他登录方式",onlineTypeText={0:"移动数据网络",1:"WiFi和移动数据网络",2:"WiFi",3:"无网络"},checkUserLogin=function(e){"true"===e&&("undefined"!=typeof commLogin?(fshowNormalLogin(),popup.showErrorPopup(isloginText,!0)):popup.showErrorPopup(isloginText,!0))},extend=function(e,t){for(var o in t)e.hasOwnProperty(o)&&"object"==typeof e[o]?extend(e[o],t[o]):e[o]=t[o];return t},mobileFormat={strimVal:function(e){return _val=e.value.replace(/\s+/g,""),_val},b_MobileCheck:function(e){return/^1\d{10}$/.test(this.strimVal(e))},b_MobileCodeCheck:function(e){return/^[0-9]{6}$/.test(this.strimVal(e))},b_captchaCheck:function(e){return/^[A-Za-z0-9]{4,6}$/.test(this.strimVal(e))}},btnClasses="ui-btn ",btnClassesDis="ui-btn ui-btn-disable",safebtnClasses="ui-btn mt-87",safbtneClassesDis="ui-btn ui-btn-disable mt-87",guid=getGuid(),kanJianTitle="其他登录方式",smsTitle="短信验证登录",accoutTitle="账号密码登录",popup=function(){var e,t,o,n,i,a,r,s={loadElement:"j-loading-popup",loadingText:"j-loading-text",element:"j-popup",errorText:"j-error-text",errorLoginLink:"j-login-link",okBtn:"j-error-ok",loadAnimate:"j-loading-animate"},l=function(t,s){n.innerHTML=t,isios?setTimeout(function(){a.innerHTML="确定",o.classList.add("block"),o.classList.remove("hide2"),r.classList.remove("loading-animate"),e.classList.add("hide2")},100):(a.innerHTML="确定",o.classList.add("block"),o.classList.remove("hide2"),r.classList.remove("loading-animate"),e.classList.add("hide2")),s?(i.classList.add("hide"),i.classList.remove("block"),a.classList.add("btn-block")):(i.classList.remove("hide"),i.classList.add("block"),a.classList.remove("btn-block")),a.setAttribute("onclick","_uxt.push(['_trackEvent','popup弹框','"+t+"','点击确定']);")},c=function(e,t,o){a.innerHTML=e,i.innerHTML=t,i.setAttribute("href",o),i.setAttribute("onclick","_uxt.push(['_trackEvent','popup弹框','"+n.innerHTML+"','点击"+t+"']);")},u=function(o){r.classList.add("loading-animate"),e.classList.remove("hide2"),e.classList.add("block"),t.innerHTML=o},p=function(){e.classList.add("hide2")},d=function(){a.addEventListener("click",function(t){o.classList.add("hide2"),e.classList.add("hide2"),t.stopPropagation()})},m={};return m.setOptions=function(l){return extend(s,l),o=document.getElementById(s.element),e=document.getElementById(s.loadElement),t=document.getElementById(s.loadingText),n=document.getElementById(s.errorText),i=document.getElementById(s.errorLoginLink),a=document.getElementById(s.okBtn),r=document.getElementById(s.loadAnimate),d(),m},m.showErrorPopup=l,m.showLoadingPopup=u,m.closePopup=p,m.showErrorBtn=c,m}(),appkeyForUrl={page:"",helpURL:function(){return"https://e.189.cn/sdk/agreement/help.do?returnUrl="+appkeyForUrl.page+"&appKey="+initData.baseV.appkey+"&forSDK=true"},detailURL:function(){return"https://e.189.cn/sdk/agreement/detail.do?returnUrl="+appkeyForUrl.page+"&appKey="+initData.baseV.appkey+"&forSDK=true"},freeURL:function(){return"https://e.189.cn/sdk/agreement/free.do?returnUrl=auto_login.html&appKey="+initData.baseV.appkey+"&forSDK=true"},linkForLogin:function(e){appkeyForUrl.page="login.html";var t=document.getElementById("j-help-login"),o=document.getElementById("j-agreement-login"),n=document.getElementById("j-client-back"),i=document.getElementById("j-adv-link");t.setAttribute("href",appkeyForUrl.helpURL()),o.setAttribute("href",appkeyForUrl.detailURL()),t.setAttribute("appkey",_uxtsdkid),o.setAttribute("appkey",_uxtsdkid),n.setAttribute("appkey",_uxtsdkid),i.setAttribute("appkey",_uxtsdkid)},linkForSmsLogin:function(){appkeyForUrl.page="sms_login.html";var e=document.getElementById("j-help-smsLogin"),t=document.getElementById("j-agreement-smsLogin"),o=document.getElementById("j-client-back"),n=document.getElementById("j-adv-link");t.setAttribute("href",appkeyForUrl.detailURL()),e.setAttribute("href",appkeyForUrl.helpURL()),e.setAttribute("appkey",_uxtsdkid),t.setAttribute("appkey",_uxtsdkid),o.setAttribute("appkey",_uxtsdkid),n.setAttribute("appkey",_uxtsdkid)},linkForAutoLogin:function(){appkeyForUrl.page="auto_login.html";var e=document.getElementById("j-help-autoLogin"),t=document.getElementById("j-agreement-autoLogin");e.setAttribute("href",appkeyForUrl.helpURL()),t.setAttribute("href",appkeyForUrl.detailURL()),e.setAttribute("appkey",_uxtsdkid),t.setAttribute("appkey",_uxtsdkid)}},getDeviceData=function(){var e={imsi:"ERWERDFDS",imei:"DerererWEWEW","mac地址":"10:16:14:55"};e=JSON.stringify(e);checkSDKFunction("getDeviceData");return e},checkAccessCode=function(){function e(e,t){for(var o=0;o<e.length;o++)if(t===e[o])return!0;return!1}var t={accessCode:"",accessCodeCreateTime:"",accessCodeVaildTime:"",encryptMobile:"",accessOperator:""},o=!1,n=function(){var e=checkSDKFunction("getCurrTimeStamp");return e?window.JSKitOnClient.getCurrTimeStamp():Date.parse(new Date)},i=function(t){var o=[],n=[];for(var i in t)"encryptMobile"===i?n.push(i):o.push(t[i]);return e(n,"encryptMobile")&&!e(o,"")&&!e(o,void 0)},a=function(){var e=i(t);return n()<parseInt(t.accessCodeCreateTime)+parseInt(1e3*t.accessCodeVaildTime)+1e4&&e},r=function(e){checkAccessCode.setOptions(e);var t=s();if(t.length<=0)preGetMobileUtil.changeOtherLoginWay();else{"true"===window.JSKitOnClient.isNetworkAvailable("preGetMobileUtil.networkAuthLogin")?preGetMobileUtil.networkAuthLogin(t):popup.showErrorPopup(autoLogin.errorMsg.errorunnet,!0)}},s=function(){var e={accessCode:t.accessCode,networkAuthParams:preGetMobileUtil.appendParams(preGetMobileUtil.networkAuthParamsArray)},o=window.JSKitOnClient.encryptParams(JSON.stringify(e));return o.length>0?JSON.parse(o):o},l=function(){t={accessCode:"",accessCodeCreateTime:"",accessCodeVaildTime:"",encryptMobile:"",accessOperator:""}},c={};return c.setOptions=function(e){(o=i(e))&&extend(t,e)},c.checkExpiryDate=a,c.checkAvailable=i,c._timeoutCodeStamp=1e4,c.getTimeStamp=n,c.getEncryptParams=r,c.delAccessCode=l,c}(),preGetMobileUtil={preGetMobileURL:"http://id6.me/openapi/networkauth/preGetMobile.do",preGetMobileParamArray:["model","system","version","networkType","onlineType","callback","timeStamp","operatorType","bussinessType"],networkAuthParamsArray:["deviceType","encryptKey","needConfirmCode","networkType","onlineType","operatorType","os","sdkVersion","timeStamp","guid"],networkAuthURL:"https://open.e.189.cn/api/oauth2/networkauth/networkAuth.do",splitFalg:"|",fristParamFalg:"?",appendParams:function(e){for(var t=this,o="",n=0;n<e.length;n++)o+=e[n]+t.splitFalg;return o.substring(0,o.length-1)},preGetMobile:function(){var e=this;if(checkAccessCode.checkExpiryDate())checkAccessCode.getEncryptParams(checkAccessCode.accessCodeData);else{var t=checkSDKFunction("preGetMobile"),o={preGetMobileURL:e.preGetMobileURL,preGetMobileParams:e.appendParams(e.preGetMobileParamArray)};t?window.JSKitOnClient.preGetMobile(JSON.stringify(o)):preGetMobileUtil.changeOtherLoginWay()}},callBackGetMobile:function(e){e=JSON.parse(e),checkAccessCode.checkAvailable(e)?checkAccessCode.getEncryptParams(e):preGetMobileUtil.changeOtherLoginWay()},callBackGetMobileNum:function(e){e=JSON.parse(e),checkAccessCode.checkAvailable(e)?(checkAccessCode.setOptions(e),autoLogin.j_login_mobile.innerHTML=e.encryptMobile,autoLogin.j_login_title.classList.remove("hide2")):autoLogin.j_login_mobile.innerHTML=autoLogin.loginTitleText},networkAuthLogin:function(e){ajax({url:this.networkAuthURL,data:e,method:"POST",dataType:"json",timeout:timeouttimmer,header:guid,success:function(e){preGetMobileUtil.decryptResult(e),window.JSKitOnClient.delAccessCodeData()},error:function(e){"timeout"===e?popup.showErrorPopup(autoLogin.errorMsg.errorunnet,!0):popup.showErrorPopup(autoLogin.errorMsg.errorClientFn,!0),window.JSKitOnClient.delAccessCodeData()}})},decryptResult:function(e){var t=window.JSKitOnClient.decryptResult(JSON.stringify(e));autoLogin.gatewayLoginCallBack(t)},changeOtherLoginWay:function(){autoLogin.gatewayLoginCallBack(JSON.stringify({result:1,onlinetype:"2"}))}},timeoutToken=function(){var e={},t=0,o="",n="true",i=document.getElementById("j-client-back"),a=function(){var e="189mail"===initData.baseV.appkey;o=initData.baseV.tokenAccount?initData.baseV.tokenAccount:o,t=initData.baseV.loginMode?initData.baseV.loginMode:t,n=initData.baseV.modifyAccount?initData.baseV.modifyAccount:n;var i=o.length>0,a=t.length>0;return e&&i&&a},r=function(){"zm"!==t&&"dm"!==t&&"dv"!==t||i.setAttribute("href","javascript:closeWindow();")},s=function(e){var t=timeoutToken.checkTokenTimeout();initData.showAutoLogin(!0),"false"!==initDom.forTokenTimeout&&t&&(timeoutToken.settingModifyAccount(),timeoutToken.handelEntryLoginBox(),e.className="txt-group  hide2",initData.showAutoLogin(!1)),"true"===initDom.forTokenTimeout&&(timeoutToken.handelLinkOtherLogin(),initData.showAutoLogin(!1))},l=function(){"zm"===t||"dv"===t?u():"dm"===t&&p()},c=function(){if("true"!==(initData.baseV.basicapp||"false")){var e=initData.baseV.loginway?initData.baseV.loginway.split("|"):"1";e="1"!==e[0]&&"2"!==e[0]?["1"]:e,autoLogin.j_tab_login_link.href=autoLogin.loginLinkUrl[e[0]]+"?forTokenTimeout=true"}},u=function(){try{var e=commLogin.j_userName.parentNode.getElementsByTagName("span")[0];"false"===n?(commLogin.j_userName.setAttribute("readonly",!0),initClearInput.changeDeleteIcon(e,!1)):initClearInput.changeDeleteIcon(e,!0),commLogin.j_userName.value=o}catch(e){}},p=function(){try{var e=sms_login.j_mobile.parentNode.getElementsByTagName("span")[0];"false"===n?(sms_login.j_mobile.setAttribute("readonly",!0),initClearInput.changeDeleteIcon(e,!1)):initClearInput.changeDeleteIcon(e,!0),sms_login.j_mobile.value=o}catch(e){}},d=function(){"undefined"!=typeof sms_login&&p(),"undefined"!=typeof commLogin&&u()};return e.checkTokenTimeout=a,e.settingModifyAccount=l,e.handelMMTokenOut=c,e.handelEntryLoginBox=r,e.handelLinkOtherLogin=d,e.handleTokenTimeout=s,e}(),islocalDev=!1,isios=!1,_uxtsdkid="test",initData={j_weixin:document.getElementById("j-weixin"),j_weibo:document.getElementById("j-weibo"),j_qq:document.getElementById("j-qq"),body_height:document.body.offsetHeight,j_loading_popup:document.getElementById("j-loading-popup"),j_popup:document.getElementById("j-popup"),j_bottom_login:document.getElementById("j-bottom-login"),j_tab_login_link:document.getElementById("j-tab-login-link"),j_normal_login:document.getElementById("j-normal-login"),j_vcode_bottom:document.getElementById("j-bottom-vcodeLogin"),j_safe_bottom:document.getElementById("j-bottom-safeLogin"),j_bottom_logo:document.getElementById("j-bottom-logo"),j_auto_login_bottom:document.getElementById("j-auto-login-bottom"),j_auto_login_box:document.getElementById("j-auto-login-box"),deviceHeight:document.body.offsetHeight,init:function(){var e=this,t=null;if(!isios){!0===checkSDKFunction("getScreenHeight")&&(e.deviceHeight=window.JSKitOnClient.getScreenHeight())}"undefined"!=typeof autoLogin&&(t=autoLogin),"undefined"!=typeof sms_login&&(t=sms_login),"undefined"!=typeof commLogin&&(t=commLogin),null!==t&&"undefined"!=typeof initDom&&(initDom.popupMsg=t.tipsMsg.changeMsg,t.initTips=initDom.initTips,t.initTips());var o=window.JSKitOnClient.getClientInitData();o=JSON.parse(o),_uxtsdkid=o.appname?o.appname:"test",isios=!!o.sdktype,iosVersion=o.sdktype?o.sdktype:"ios1.0",null!==o?("flow"===o.appkey&&(o.loginway="2"),e.baseV=o,"function"==typeof t.initDOM&&t.initDOM(),uxt.initUxt(),t.init()):(popup.setOptions(),popup.showErrorPopup("服务器连接失败，请稍候再试",!0))},getAdvertSwitch:function(){var e=this,t="CT"===e.baseV.accessOperator.toUpperCase(),o=e.baseV.operator.toUpperCase().indexOf("CT")>-1,n="189mail"===e.baseV.appkey||"cloud"===e.baseV.appkey;if(t&&n||n&&o)try{ajax({url:"https://open.e.189.cn/api/oauth2/account/getAdvertSwitch.do",data:{clientId:e.baseV.appkey},method:"POST",dataType:"json",sync:!1,timeout:timeouttimmer,header:guid,success:function(t){0===t.result?"on"===t.advertSwitch?e.showAdv():e.hideAdv():e.showAdv()},error:function(t){e.showAdv()}})}catch(t){e.showAdv(),console.log("广告位开关接口异常")}},showAdv:function(){var e=document.getElementById("j-adv");document.getElementById("j-adv-box").style.display="block",e.setAttribute("class","adv"),e.setAttribute("src","images/adv.png"),e.setAttribute("alt","广告")},hideAdv:function(){var e=document.getElementById("j-adv"),t=document.getElementById("j-adv-box"),o=document.getElementById("j-bottom-login"),n=parseInt(o.style.marginTop.replace("px",""))+e.clientHeight;t.style.display="none",e.setAttribute("class",""),e.setAttribute("src",""),e.setAttribute("alt",""),o.style.marginTop=n+"px"},showAutoLogin:function(e){var t=document.getElementById("j-auto-login-box");t.style.display=e?"block":"none"},bottomPositioin:function(){var e=this,t=e.deviceHeight;if(isios)e.j_bottom_login.setAttribute("style","visibility:visible"),e.j_vcode_bottom&&(e.j_safe_bottom.setAttribute("style","visibility:visible"),e.j_vcode_bottom.setAttribute("style","visibility:visible"));else{var o=e.j_normal_login.offsetHeight,n=e.j_bottom_login.offsetHeight,i=t-o-n;if(i<-26&&(i=-26,document.body.style.overflow="auto"),e.j_bottom_login.setAttribute("style","position:static;visibility:visible;margin-top:"+i+"px"),e.j_vcode_bottom){var a=e.j_bottom_logo.offsetHeight,r=t-o-a+e.j_auto_login_box.offsetHeight-30;e.j_safe_bottom.setAttribute("style","visibility:visible;position:static;margin-top:0;padding-top:"+r+"px"),e.j_vcode_bottom.setAttribute("style","visibility:visible;position:static;margin-top:0;padding-top:"+r+"px")}}e.j_loading_popup.style.height=t+"px",e.j_popup.style.height=t+"px"},thirdLogin:function(){var e=this,t=e.baseV&&e.baseV.showthirdlogin?e.baseV.showthirdlogin.split("|"):[],o=!1;if(t.length>0&&e.baseV.showthirdlogin.length>0){for(var n=0;n<t.length;n++){var i=e["j_"+t[n]];i.setAttribute("appkey",_uxtsdkid),void 0!==i&&(o=!0),i&&displayblock(i)}o&&show(j_other_line),show(j_other_logo)}}},_hasClientFucntion=checkSDKFunction("getClientInitData");_hasClientFucntion&&initData.init();